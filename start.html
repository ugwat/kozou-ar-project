<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>KOZOU+ AR Experience</title>
<style>
  /* 基本スタイル - 共通 */
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { width: 100%; height: 100%; background: #000; overflow: hidden; position: fixed; }
  
  /* エラー抑制用 */
  #error-suppression-container {
    display: none;
    visibility: hidden;
    position: absolute;
    width: 0;
    height: 0;
    overflow: hidden;
  }
  
  /* ローディング画面 */
  #loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: #000;
    color: white;
    font-family: sans-serif;
    z-index: 1000;
  }
  
  /* ボタンスタイル */
  #start-button {
    margin-top: 20px;
    padding: 15px 30px;
    background: #00a2ff;
    color: white;
    border: none;
    border-radius: 5px;
    font-size: 18px;
    cursor: pointer;
    transition: background 0.3s, transform 0.2s;
  }
  
  #start-button:hover {
    background: #0080cc;
    transform: scale(1.05);
  }
  
  #start-button:active {
    transform: scale(0.95);
  }
  
  /* 回転アニメーション */
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>
<script>
// ShowOneChildエラーの修正 - 先に定義して対応
window.ShowOneChild = window.ShowOneChild || {
  readRenderPromptFromStorage: function() { return null; },
  getRenderPrompt: function() { return null; },
  render: function() { return null; }
};

// localStorage拡張
if (window.localStorage && !window.localStorage.getWithTTL) {
  window.localStorage.getWithTTL = function(key) {
    return window.localStorage.getItem(key);
  };
}

// IO errorの抑制
window.addEventListener('error', function(e) {
  if (e && e.message && typeof e.message === 'string' && 
     (e.message.includes('ChromeMethodBFE') || e.message.includes('Unable to create writable file'))) {
    console.warn('IO error suppressed:', e.message);
    return true; // エラー伝播を停止
  }
}, true);

// コンソールログ追加（デバッグ用）
console.log("start.html loaded");
</script>
</head>

<body>
<!-- エラー抑制用のダミー要素 -->
<div id="error-suppression-container">
  <div id="ShowOneChild-dummy"></div>
</div>

<!-- ローディング画面 -->
<div id="loading-screen">
  <div style="border:5px solid rgba(0,200,255,0.1); border-top:5px solid #00c8ff; border-radius:50%; width:50px; height:50px; animation:spin 1s linear infinite; margin-bottom:20px;"></div>
  <div>読み込み中...</div>
  <button id="start-button" style="margin-top:20px; padding:15px 30px; background:#00a2ff; color:white; border:none; border-radius:5px; font-size:18px; cursor:pointer;">AR体験を開始</button>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  console.log("DOM loaded in start.html");
  
  // ボタンクリックでscan.htmlに遷移
  document.getElementById('start-button').addEventListener('click', function() {
    console.log("Button clicked, navigating to scan.html");
    window.location.href = 'scan.html';
  });
});
</script>
</body>
</html>